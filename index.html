<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 å¡”æ–¯æ›¼å°¼äº 10å¤©è‡ªé§•</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Zen Maru Gothic', sans-serif;
            background-color: #F8FAFC; /* æ¥µæ·ºè—ç° */
            overscroll-behavior-y: none;
        }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .soft-shadow { box-shadow: 0 4px 25px rgba(37, 99, 235, 0.15); }
    </style>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        tas: {
                            100: '#EFF6FF', // Blue 50
                            200: '#BFDBFE', // Blue 200
                            300: '#93C5FD', // Blue 300
                            500: '#3B82F6', // Blue 500
                            600: '#2563EB', // Blue 600 (Main Brand Color)
                            700: '#1D4ED8', // Blue 700
                            gold: '#F59E0B', // Amber 500 (Highlight)
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="text-slate-700 h-screen w-screen overflow-hidden flex flex-col">

    <div id="app" class="h-full flex flex-col relative">

        <div class="relative h-[250px] flex-shrink-0 bg-cover bg-center transition-all duration-500"
             style="background-image: url('./header.png'), url('./header.jpg');">
            <div class="absolute inset-0 bg-gradient-to-b from-slate-900/40 to-slate-900/80"></div>
            
            <div class="absolute bottom-8 right-4 flex space-x-3 z-20">
                <button @click="currentTab = 'itinerary'" :class="tabClass('itinerary')"><i class="fa-solid fa-map-location-dot text-lg"></i></button>
                <button @click="currentTab = 'info'" :class="tabClass('info')"><i class="fa-solid fa-circle-info text-lg"></i></button>
                <button @click="currentTab = 'shopping'" :class="tabClass('shopping')"><i class="fa-solid fa-basket-shopping text-lg"></i></button>
                <button @click="currentTab = 'expenses'" :class="tabClass('expenses')"><i class="fa-solid fa-dollar-sign text-lg"></i></button>
            </div>
            
            <div class="absolute bottom-10 left-6 text-white text-shadow drop-shadow-md">
                <h1 class="text-2xl font-bold tracking-widest">TASMANIA 2026</h1>
                <p class="text-sm opacity-90"><i class="fa-solid fa-earth-oceania mr-1 text-tas-300"></i>10 Days Road Trip</p>
            </div>
        </div>

        <div class="flex-1 bg-white rounded-t-[30px] -mt-6 relative z-10 overflow-hidden flex flex-col shadow-[0_-5px_20px_rgba(0,0,0,0.05)]">
            <div class="flex-1 overflow-y-auto no-scrollbar p-5 pb-24">

                <div v-if="currentTab === 'itinerary'">
                    <div class="flex space-x-3 overflow-x-auto no-scrollbar mb-6 py-2">
                        <div v-for="(day, index) in days" :key="index" @click="selectedDayIndex = index"
                             class="flex-shrink-0 flex flex-col items-center justify-center w-16 h-20 rounded-2xl transition-all duration-300 snap-center cursor-pointer border border-gray-100"
                             :class="selectedDayIndex === index ? 'bg-tas-600 text-white shadow-lg scale-105' : 'bg-white text-gray-400 border-gray-200'">
                            <span class="text-xs font-bold uppercase">{{ day.weekday }}</span>
                            <span class="text-xl font-bold">{{ day.date }}</span>
                            <span class="text-[10px] opacity-80">Day {{ day.dayNum }}</span>
                        </div>
                    </div>

                    <div class="bg-gradient-to-r from-blue-50 to-tas-100 rounded-2xl p-4 mb-12 flex items-center justify-between shadow-sm text-slate-700 border border-blue-100">
                        <div>
                            <div class="text-xs opacity-70 flex items-center gap-1"><i class="fa-solid fa-location-dot text-tas-500"></i> {{ weather.city_name }}</div>
                            <div class="text-2xl font-bold text-tas-700">{{ weather.temp }}Â°C <span class="text-sm font-normal text-gray-500">é«”æ„Ÿ {{ weather.feels_like }}Â°C</span></div>
                        </div>
                        <i :class="['fa-solid', weather.icon, 'text-4xl text-yellow-400 drop-shadow-sm']"></i>
                    </div>

                    <div class="space-y-0 relative">
                        <div class="absolute left-[22px] top-4 bottom-4 w-0.5 bg-tas-200 opacity-50 z-0"></div>

                        <div v-for="(item, idx) in currentDayItinerary" :key="item.id" class="relative pl-12 pb-14 group">
                            <div v-if="idx > 0" class="absolute -top-9 left-12 right-0 flex items-center text-xs text-tas-600 mb-2 z-50">
                                <span class="bg-white px-3 py-1 rounded-full border border-tas-200 flex items-center gap-1 shadow-sm font-bold whitespace-nowrap text-tas-600">
                                    <i :class="getTransportIcon(item.transportType)"></i>
                                    {{ item.travelTime || 'ç§»å‹•' }}
                                </span>
                            </div>
                            <div class="absolute left-0 top-4 w-11 h-11 rounded-full bg-white border-4 border-tas-100 flex items-center justify-center z-10 shadow-sm text-tas-600 font-bold text-xs">
                                {{ item.time.split(':')[0] }}
                            </div>
                            <div class="bg-white rounded-2xl p-4 soft-shadow relative overflow-hidden transition-all active:scale-95 border border-gray-50"
                                 :class="{'border-l-4 border-orange-400': item.category === 'flight', 'border-l-4 border-tas-500': item.category !== 'flight'}">
                                <div @click="openMap(item.location)">
                                    <div class="flex justify-between items-start mb-1">
                                        <div class="text-xs font-bold text-tas-500 uppercase tracking-wider">{{ item.time }} â€¢ {{ itemCategoryName(item.category) }}</div>
                                        <div class="flex gap-2">
                                            <button @click.stop="moveItem(idx, -1)" v-if="idx > 0" class="text-gray-300 hover:text-tas-600"><i class="fa-solid fa-chevron-up"></i></button>
                                            <button @click.stop="moveItem(idx, 1)" v-if="idx < currentDayItinerary.length - 1" class="text-gray-300 hover:text-tas-600"><i class="fa-solid fa-chevron-down"></i></button>
                                            <button @click.stop="deleteItem(item.id)" class="text-gray-300 hover:text-red-400"><i class="fa-solid fa-trash"></i></button>
                                        </div>
                                    </div>
                                    <h3 class="text-lg font-bold mb-1 leading-tight text-slate-800">{{ item.title }}</h3>
                                    <div class="text-sm text-gray-500 mb-2 flex items-start gap-1" v-if="item.desc">
                                        <i class="fa-regular fa-note-sticky mt-0.5 text-xs flex-shrink-0 text-tas-400"></i>
                                        <span class="whitespace-pre-line text-xs">{{ item.desc }}</span>
                                    </div>
                                    
                                    <div v-if="item.info" class="mt-2 p-2 bg-yellow-50 rounded-lg text-xs text-yellow-700 border border-yellow-100 flex items-start gap-2">
                                        <i class="fa-solid fa-circle-exclamation mt-0.5 flex-shrink-0"></i>
                                        <span>{{ item.info }}</span>
                                    </div>
                                    
                                    <div class="flex flex-wrap gap-2 mt-2">
                                        <span v-if="item.transportType === 'car'" class="text-[10px] bg-blue-50 text-blue-600 px-2 py-1 rounded-md"><i class="fa-solid fa-car mr-1"></i>è‡ªé§•</span>
                                        <span v-if="item.location" class="text-[10px] bg-gray-100 text-gray-500 px-2 py-1 rounded-md"><i class="fa-solid fa-location-arrow mr-1"></i>å°èˆª</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div v-if="currentDayItinerary.length === 0" class="text-center text-gray-400 py-10">
                            <i class="fa-solid fa-calendar-plus text-4xl mb-3 text-tas-200"></i>
                            <p>é»æ“Šå³ä¸‹è§’æ–°å¢è¡Œç¨‹</p>
                        </div>
                    </div>
                </div>

                <div v-if="currentTab === 'info'" class="space-y-6">
                    
                    <div class="bg-white rounded-2xl p-0 soft-shadow overflow-hidden border-l-4 border-tas-600">
                        <div class="bg-tas-100 p-3 text-tas-800 font-bold flex justify-between items-center">
                            <span><i class="fa-solid fa-file-lines mr-2"></i>å®Œæ•´è¡Œç¨‹è¡¨</span>
                        </div>
                        <div class="p-4">
                            <a href="https://docs.google.com/document/d/14YFJ5OEcvvYGdfyaxKKCKzm5MDl5ZsiqXJYFwri3bQU/edit?usp=drivesdk" target="_blank" class="block w-full bg-tas-600 text-white font-bold py-3 rounded-xl shadow-md hover:bg-tas-700 transition-colors text-center">
                                <i class="fa-brands fa-google-drive mr-2"></i> é»æ“ŠæŸ¥çœ‹ Google Doc
                            </a>
                            <p class="text-xs text-gray-400 mt-2 text-center">åŒ…å«è©³ç´°åœ°åœ–ã€é ç´„ä¿¡åŠç·Šæ€¥è¯çµ¡</p>
                        </div>
                    </div>

                    <div class="bg-white rounded-2xl p-4 soft-shadow">
                        <h3 class="font-bold text-slate-700 mb-3"><i class="fa-solid fa-clipboard-check mr-2 text-tas-500"></i>å‡ºç™¼å‰ Checklist</h3>
                        <div class="space-y-2 text-sm">
                            <div class="flex items-center gap-2"><input type="checkbox" class="accent-tas-600"> ç°½è­‰: ETA / eVisitor</div>
                            <div class="flex items-center gap-2"><input type="checkbox" class="accent-tas-600"> ç§Ÿè»Š: å…¨ä¿ (Zero Excess) ğŸš—</div>
                            <div class="flex items-center gap-2"><input type="checkbox" class="accent-tas-600"> è­‰ä»¶: åœ‹éš›è»Šç‰Œ + é¦™æ¸¯è»Šç‰Œ</div>
                            <div class="flex items-center gap-2"><input type="checkbox" class="accent-tas-600"> è³¼è²· Parks Pass ($89/è»Š) ğŸŒ²</div>
                            <div class="flex items-center gap-2"><input type="checkbox" class="accent-tas-600"> é è¨‚: Cruise / ä¼éµ / ä½å®¿</div>
                            <div class="flex items-center gap-2"><input type="checkbox" class="accent-tas-600"> è¡£ç‰©: é˜²é¢¨é˜²æ°´å¤–å¥— (å±±å€å‡) ğŸ§¥</div>
                        </div>
                    </div>

                    <div class="bg-white rounded-2xl p-0 soft-shadow overflow-hidden border-l-4 border-blue-500">
                        <div class="bg-blue-50 p-3 text-blue-800 font-bold flex justify-between">
                            <span><i class="fa-solid fa-car-side mr-2"></i>è‡ªé§•æ³¨æ„ (Hobart -> Launceston)</span>
                        </div>
                        <div class="p-4 text-sm space-y-2">
                             <p><strong>å–è»Š:</strong> Day 4 @ Hobart City</p>
                             <p><strong>é‚„è»Š:</strong> Day 9 @ Launceston Airport</p>
                             <p><strong>æ³¨æ„:</strong> å¿…é ˆè²·å…¨ä¿ (Zero Excess) é˜²è¢‹é¼ /ç¢çŸ³ã€‚å…¥å¤œå¾Œç›¡é‡å°‘é–‹è»Š (å¤šå‹•ç‰©)ã€‚</p>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-2xl p-0 soft-shadow overflow-hidden border-2 border-red-100">
                        <div class="bg-red-50 p-3 text-red-700 font-bold flex justify-between items-center">
                            <span><i class="fa-regular fa-bell mr-2"></i>To-Book é è¨‚æ¸…å–®</span>
                        </div>
                        <div class="p-4 space-y-4 text-sm">
                            <div>
                                <h4 class="font-bold text-red-600 mb-2 border-b border-red-100 pb-1">ğŸš¨ Level 1: ç›¡å¿«é è¨‚</h4>
                                <ul class="space-y-2 text-xs text-gray-600">
                                    <li><span class="font-bold text-slate-800">ğŸ¨ ä½å®¿:</span> å°¤å…¶ Cradle Mt & Bicheno</li>
                                    <li><span class="font-bold text-slate-800">ğŸš¢ Seafood Cruise:</span> Day 4 (Tasmanian Seafood Seduction)</li>
                                    <li><span class="font-bold text-slate-800">ğŸ§ Bicheno Penguin Tour:</span> Day 6 æ™š</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-2xl p-5 soft-shadow">
                        <h3 class="font-bold text-tas-600 mb-3"><i class="fa-solid fa-coins mr-2"></i>åŒ¯ç‡æ›ç®—</h3>
                        <div class="flex items-center gap-2 mb-2">
                            <div class="flex-1 bg-gray-50 rounded-lg p-2 flex items-center"><span class="text-gray-400 mr-2 text-sm">AUD</span><input type="number" v-model="calcAud" @input="convert('aud')" class="w-full bg-transparent outline-none font-bold text-lg" placeholder="0"></div>
                            <i class="fa-solid fa-arrow-right-arrow-left text-gray-300"></i>
                            <div class="flex-1 bg-gray-50 rounded-lg p-2 flex items-center"><span class="text-gray-400 mr-2 text-sm">HKD</span><input type="number" v-model="calcHkd" @input="convert('hkd')" class="w-full bg-transparent outline-none font-bold text-lg" placeholder="0"></div>
                        </div>
                        <div class="text-right text-xs text-gray-400">åŒ¯ç‡: {{ exchangeRate }} (AUD -> HKD)</div>
                    </div>

                    <div class="bg-white rounded-2xl p-0 soft-shadow overflow-hidden">
                        <div class="bg-gray-100 p-3 text-gray-600 font-bold flex justify-between"><span><i class="fa-solid fa-plane mr-2"></i>èˆªç­è³‡è¨Š (Qantas)</span></div>
                        <div class="p-5">
                            <div class="mb-4">
                                <div class="flex justify-between text-xs text-gray-400 mb-1"><span>5/21 HKG â†’ SYD</span></div>
                                <div class="flex justify-between text-sm font-bold bg-tas-100 text-tas-700 p-2 rounded-lg"><span>QF128</span><span>19:30 -> 06:55+1</span></div>
                            </div>
                            <div class="mb-4">
                                <div class="flex justify-between text-xs text-gray-400 mb-1"><span>5/22 SYD â†’ HBA</span></div>
                                <div class="flex justify-between text-sm font-bold bg-tas-100 text-tas-700 p-2 rounded-lg"><span>QF1533</span><span>12:05 -> 13:55</span></div>
                            </div>
                            <div class="mb-4">
                                <div class="flex justify-between text-xs text-gray-400 mb-1"><span>5/30 LST â†’ SYD</span></div>
                                <div class="flex justify-between text-sm font-bold bg-tas-100 text-tas-700 p-2 rounded-lg"><span>QF5746</span><span>09:45 -> 11:25</span></div>
                            </div>
                            <div>
                                <div class="flex justify-between text-xs text-gray-400 mb-1"><span>5/31 SYD â†’ HKG</span></div>
                                <div class="flex justify-between text-sm font-bold bg-tas-100 text-tas-700 p-2 rounded-lg"><span>QF127</span><span>10:10 -> 17:55</span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div v-if="currentTab === 'shopping'">
                    <div class="grid grid-cols-2 gap-4">
                        <div v-for="item in shoppingList" :key="item.id" class="bg-white rounded-xl p-3 soft-shadow relative group">
                            <button @click="removeShoppingItem(item.id)" class="absolute top-2 right-2 bg-white/80 rounded-full w-6 h-6 flex items-center justify-center text-red-400 shadow-sm z-10"><i class="fa-solid fa-xmark"></i></button>
                            <div class="aspect-square bg-gray-100 rounded-lg mb-2 overflow-hidden bg-cover bg-center" :style="item.image ? `background-image: url(${item.image})` : ''">
                                 <div v-if="!item.image" class="w-full h-full flex items-center justify-center text-gray-300"><i class="fa-solid fa-image"></i></div>
                            </div>
                            <h4 class="font-bold text-sm text-center truncate">{{ item.name }}</h4>
                        </div>
                    </div>
                    <div v-if="shoppingList.length === 0" class="text-center text-gray-400 mt-10"><p>å°šç„¡è³¼ç‰©æ¸…å–®</p><p class="text-xs mt-2">å¿…è²·: è–°è¡£è‰ç†Šã€çš®é©èœœç³–!</p></div>
                </div>

                <div v-if="currentTab === 'expenses'">
                    <div class="bg-tas-600 text-white rounded-2xl p-6 mb-6 shadow-lg text-center">
                        <div class="text-sm opacity-80 mb-1">ç¸½èŠ±è²» (æ¾³å…ƒ)</div>
                        <div class="text-4xl font-bold">${{ totalExpenses.toLocaleString() }}</div>
                        <div class="text-xs opacity-70 mt-1">â‰ˆ HK$ {{ (totalExpenses * exchangeRate).toFixed(1) }}</div>
                    </div>
                    <div class="space-y-3">
                        <div v-for="exp in expenses" :key="exp.id" class="bg-white rounded-xl p-4 soft-shadow flex justify-between items-center relative group">
                            <button @click="deleteExpense(exp.id)" class="absolute top-2 right-3 text-gray-300 hover:text-red-400 p-2 z-10"><i class="fa-solid fa-trash-can"></i></button>
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-500"><i :class="getCategoryIcon(exp.category)"></i></div>
                                <div><div class="font-bold text-sm">{{ exp.name }}</div><div class="text-xs text-gray-400">{{ exp.date }} â€¢ {{ exp.payment }}</div></div>
                            </div>
                            <div class="text-right pr-6">
                                <div class="font-bold text-tas-600">${{ parseInt(exp.amount).toLocaleString() }}</div>
                                <div class="text-[10px] text-gray-300">â‰ˆ HK$ {{ (exp.amount * exchangeRate).toFixed(0) }}</div>
                            </div>
                        </div>
                    </div>
                    <div v-if="expenses.length === 0" class="text-center text-gray-400 mt-10"><p>å°šæœªæœ‰è¨˜å¸³</p></div>
                </div>
            </div>
        </div>

        <button @click="openAddModal" class="absolute bottom-6 right-6 w-14 h-14 bg-tas-600 text-white rounded-full shadow-lg flex items-center justify-center text-2xl z-50 hover:bg-tas-500 transition-colors"><i class="fa-solid fa-plus"></i></button>

        <div v-if="showModal" class="fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/50 backdrop-blur-sm" @click.self="showModal = false">
            <div class="bg-white w-full sm:w-96 rounded-t-3xl sm:rounded-3xl p-6 shadow-2xl animate-slide-up">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-tas-600">{{ currentTab === 'itinerary' ? 'æ–°å¢è¡Œç¨‹' : currentTab === 'shopping' ? 'æ–°å¢è³¼ç‰©' : 'è¨˜ä¸€ç­†' }}</h3>
                    <button @click="showModal = false" class="text-gray-400"><i class="fa-solid fa-xmark text-xl"></i></button>
                </div>

                <div v-if="currentTab === 'itinerary'" class="space-y-4">
                    <input v-model="newItem.title" type="text" placeholder="è¡Œç¨‹åç¨±" class="w-full p-3 bg-gray-50 rounded-xl border-none outline-none focus:ring-2 focus:ring-tas-300">
                    <div class="flex gap-2">
                        <input v-model="newItem.time" type="time" class="w-1/3 p-3 bg-gray-50 rounded-xl outline-none">
                        <select v-model="newItem.category" class="w-2/3 p-3 bg-gray-50 rounded-xl outline-none"><option value="sightseeing">æ™¯é»</option><option value="food">ç¾é£Ÿ</option><option value="shopping">è³¼ç‰©</option><option value="transport">äº¤é€š</option><option value="hotel">ä½å®¿</option></select>
                    </div>
                    <div class="bg-gray-50 p-3 rounded-xl">
                         <div class="flex gap-2">
                             <select v-model="newItem.transportType" class="flex-1 p-2 bg-white rounded-lg text-sm"><option value="car">è‡ªé§•</option><option value="walk">æ­¥è¡Œ</option><option value="flight">é£›æ©Ÿ</option><option value="ship">èˆ¹/æ¸¡è¼ª</option></select>
                             <input v-model="newItem.travelTime" placeholder="æ™‚é–“ (e.g. 1.5 hr)" class="flex-1 p-2 bg-white rounded-lg text-sm">
                         </div>
                     </div>
                    <textarea v-model="newItem.desc" placeholder="é›»è©± / å‚™è¨»" class="w-full p-3 bg-gray-50 rounded-xl border-none outline-none h-24"></textarea>
                    <input v-model="newItem.info" type="text" placeholder="âš ï¸ ç‰¹åˆ¥æç¤º (é¸å¡«)" class="w-full p-3 bg-yellow-50 text-yellow-600 rounded-xl border border-yellow-100 outline-none text-sm placeholder-yellow-300">
                    <input v-model="newItem.location" type="text" placeholder="å°èˆªåœ°é» (Google Map)" class="w-full p-3 bg-gray-50 rounded-xl border-none outline-none text-sm">
                </div>

                <div v-if="currentTab === 'shopping'" class="space-y-4">
                    <input v-model="newShopping.name" type="text" placeholder="å•†å“åç¨±" class="w-full p-3 bg-gray-50 rounded-xl outline-none">
                    <div class="relative w-full h-32 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200 flex flex-col items-center justify-center text-gray-400 cursor-pointer hover:bg-gray-100">
                        <input type="file" @change="handleImageUpload" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer">
                        <i class="fa-solid fa-camera text-2xl mb-1"></i>
                    </div>
                </div>

                <div v-if="currentTab === 'expenses'" class="space-y-4">
                    <input v-model="newExpense.name" type="text" placeholder="é …ç›®åç¨±" class="w-full p-3 bg-gray-50 rounded-xl outline-none">
                    <div class="flex gap-2">
                        <input v-model="newExpense.amount" type="number" placeholder="é‡‘é¡ (AUD)" class="flex-1 p-3 bg-gray-50 rounded-xl outline-none">
                        <select v-model="newExpense.category" class="w-1/3 p-3 bg-gray-50 rounded-xl outline-none"><option value="food">é£²é£Ÿ</option><option value="transport">äº¤é€š/æ²¹</option><option value="shopping">è³¼ç‰©</option><option value="ticket">é–€ç¥¨</option><option value="hotel">ä½å®¿</option></select>
                    </div>
                     <select v-model="newExpense.payment" class="w-full p-3 bg-gray-50 rounded-xl outline-none"><option value="ç¾é‡‘">ç¾é‡‘</option><option value="ä¿¡ç”¨å¡">ä¿¡ç”¨å¡</option></select>
                </div>

                <button @click="confirmAdd" class="w-full bg-tas-600 text-white font-bold py-4 rounded-xl mt-6 shadow-lg hover:bg-tas-500 transition-all">ç¢ºèªæ–°å¢</button>
            </div>
        </div>

        <div v-if="showImageModal" class="fixed inset-0 z-[60] flex items-center justify-center bg-black/90 backdrop-blur-sm p-4" @click="showImageModal = false">
            <img :src="currentImageSrc" class="max-w-full max-h-full rounded-lg shadow-2xl object-contain transition-transform duration-300 scale-100" @click.stop>
            <button class="absolute top-4 right-4 text-white text-3xl opacity-80 hover:opacity-100"><i class="fa-solid fa-xmark"></i></button>
        </div>

    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    currentTab: 'itinerary',
                    selectedDayIndex: 0,
                    showModal: false,
                    showImageModal: false,
                    currentImageSrc: '',
                    exchangeRate: 5.2, // AUD to HKD
                    calcAud: '',
                    calcHkd: '',
                    
                    weather: { city_name: 'Hobart, AU', temp: '--', feels_like: '--', icon: 'fa-spinner fa-spin' },
                    apiKey: 'cc2dab2806da14aec6dab2ed8260a1c4', 

                    days: [
                        { weekday: 'Wed', date: '5/21', dayNum: '0' }, 
                        { weekday: 'Thu', date: '5/22', dayNum: '1' }, { weekday: 'Fri', date: '5/23', dayNum: '2' },
                        { weekday: 'Sat', date: '5/24', dayNum: '3' }, { weekday: 'Sun', date: '5/25', dayNum: '4' },
                        { weekday: 'Mon', date: '5/26', dayNum: '5' }, { weekday: 'Tue', date: '5/27', dayNum: '6' },
                        { weekday: 'Wed', date: '5/28', dayNum: '7' }, { weekday: 'Thu', date: '5/29', dayNum: '8' },
                        { weekday: 'Fri', date: '5/30', dayNum: '9' }, { weekday: 'Sat', date: '5/31', dayNum: '10' }
                    ],

                    itineraryData: [
                        // Day 0: 5/21
                        [
                            { id: 0, time: '17:30', title: 'æŠµé”é¦™æ¸¯æ©Ÿå ´ T1', category: 'flight', desc: 'è¾¦ç†ç™»æ©Ÿ/å®‰æª¢', transportType: 'walk', location: 'HKIA' },
                            { id: 1, time: '19:30', title: 'ğŸ›« HKG â†’ SYD (QF128)', category: 'flight', desc: 'é£›è¡Œæ™‚é–“ 9h 15m\næ©Ÿä¸Šå»ºè­°ï¼šæˆ´é ¸æ•ã€çœ¼ç½©ï¼Œç›¡é‡è¨“è¦ºã€‚', transportType: 'flight' }
                        ],
                        // Day 1: 5/22
                        [
                            { id: 11, time: '06:55', title: 'æŠµé” Sydney (SYD) T1', category: 'transport', desc: 'éé—œã€å–è¡Œæ\næ­ T-Bus/T-Train è½‰å¾€ T2 åœ‹å…§èˆªå»ˆ', transportType: 'bus', location: 'Sydney Airport' },
                            { id: 12, time: '12:05', title: 'ğŸ›« SYD â†’ HBA (QF1533)', category: 'flight', desc: 'å‰å¾€ Hobart', transportType: 'flight' },
                            { id: 13, time: '13:55', title: 'æŠµé” Hobart æ©Ÿå ´', category: 'transport', desc: 'æ­çš„å£«/Uber å‰å¾€å¸‚å€', transportType: 'car', location: 'Hobart Airport' },
                            { id: 14, time: '16:00', title: 'æµ·æ¿±æ•£æ­¥', category: 'sightseeing', desc: 'Constitution Dock / Brooke St Pier\nç†Ÿè·¯', transportType: 'walk', location: 'Constitution Dock' },
                            { id: 15, time: '18:00', title: 'æ™šé¤: Mures / Drunken Admiral', category: 'food', desc: 'æµ·é®®æ™šé¤', transportType: 'walk', location: 'Mures Lower Deck' },
                            { id: 16, time: '20:00', title: 'Check-in Hobart CBD', category: 'hotel', desc: 'Hobart å¸‚å€é…’åº—', transportType: 'walk', location: 'Hobart' }
                        ],
                        // Day 2: 5/23
                        [
                            { id: 21, time: '09:00', title: 'æ—©é¤: Villino / Daci', category: 'food', desc: 'å¸‚å€ Cafe', transportType: 'walk', location: 'Villino Coffee' },
                            { id: 22, time: '10:00', title: 'å¸‚å€æ¼«éŠ', category: 'sightseeing', desc: 'Salamanca Place å°åº—ã€Kellyâ€™s Steps', transportType: 'walk', location: 'Salamanca Place' },
                            { id: 23, time: '12:30', title: 'åˆé¤: Fish Frenzy', category: 'food', desc: 'ç‚¸é­šè–¯æ¢', transportType: 'walk', location: 'Fish Frenzy' },
                            { id: 24, time: '14:30', title: 'Mt Wellington (kunanyi)', category: 'sightseeing', desc: 'Uber/å·´å£«ä¸Šå±±\nå±±é ‚æ¥µå¤§é¢¨ï¼Œéœ€ç©¿åšå¤–å¥—', info: 'Pinnacle Observation Shelter', transportType: 'car', location: 'Mount Wellington' },
                            { id: 25, time: '18:00', title: 'æ™šé¤: Frank Restaurant', category: 'food', desc: 'å—ç¾çƒ¤è‚‰ (å»ºè­°é ç´„)', transportType: 'car', location: 'Frank Restaurant' }
                        ],
                        // Day 3: 5/24
                        [
                            { id: 31, time: '08:30', title: 'ğŸ›ï¸ Salamanca Market', category: 'shopping', desc: 'é€±å…­é™å®šå¸‚é›†\nå¿…è²·ï¼šè–°è¡£è‰ç†Šã€çš®é©èœœç³–ã€æœ¨é›•', transportType: 'walk', location: 'Salamanca Market' },
                            { id: 32, time: '11:00', title: 'å‰å¾€ Brooke St Pier ç¢¼é ­', category: 'transport', desc: '11:15 æ­èˆ¹å‰å¾€ MONA', transportType: 'ship', location: 'Brooke Street Pier' },
                            { id: 33, time: '11:45', title: 'MONA ç¾è¡“é¤¨', category: 'sightseeing', desc: 'å‰è¡›è—è¡“é¤¨ (ç´„ 3 å°æ™‚)', transportType: 'walk', location: 'MONA' },
                            { id: 34, time: '15:00', title: 'æ­èˆ¹è¿”å› Hobart', category: 'transport', desc: 'è¿”å›å¸‚å€', transportType: 'ship' },
                            { id: 35, time: '16:00', title: 'Battery Point æ•£æ­¥', category: 'sightseeing', desc: 'Arthur Circus å°å±‹', transportType: 'walk', location: 'Battery Point' },
                            { id: 36, time: '18:00', title: 'æ™šé¤: Da Angelo Ristorante', category: 'food', desc: 'æ„å¤§åˆ©èœ', transportType: 'walk', location: 'Da Angelo Ristorante' }
                        ],
                        // Day 4: 5/25 (å–è»Š)
                        [
                            { id: 41, time: '09:45', title: 'é›†åˆ @ Franklin Wharf', category: 'transport', desc: 'æº–å‚™ä¸Šèˆ¹', transportType: 'walk', location: 'Franklin Wharf' },
                            { id: 42, time: '10:00', title: 'Seafood Cruise', category: 'food', desc: 'Deep-to-Dish Tasmanian Seafood Cruise\n4.5å°æ™‚: é£Ÿå³æ’ˆæµ·è†½ã€é®‘é­šã€é¾è¦', transportType: 'ship', location: 'Tasmanian Seafood Seduction' },
                            { id: 43, time: '15:30', title: 'ğŸš— å–è»Š (Hobart City)', category: 'transport', desc: 'æª¢æŸ¥è»Šèº«ã€è¼ªèƒã€Parks Pass', info: 'è²·å…¨ä¿ Zero Excess', transportType: 'car', location: 'Hobart' },
                            { id: 44, time: '17:00', title: 'è¶…å¸‚è£œçµ¦', category: 'shopping', desc: 'Woolworths/Coles è²·æ°´åŠä¹¾ç³§', transportType: 'car', location: 'Woolworths Hobart' },
                            { id: 45, time: '18:30', title: 'æ™šé¤: ç°¡å–®è¼•é£Ÿ', category: 'food', desc: 'è¶…å¸‚çƒ¤é›', transportType: 'walk' }
                        ],
                         // Day 5: 5/26 (Bruny Island)
                         [
                            { id: 51, time: '08:00', title: 'Hobart â†’ Kettering', category: 'transport', desc: 'å‰å¾€ç¢¼é ­æ­èˆ¹', transportType: 'car', travelTime: '35 min' },
                            { id: 52, time: '09:00', title: 'æ¸¡è¼ªå¾€ Bruny Island', category: 'transport', desc: 'äººè»Šä¸Šèˆ¹', transportType: 'ship', location: 'Kettering Ferry Terminal' },
                            { id: 53, time: '09:40', title: 'The Neck Lookout', category: 'sightseeing', desc: 'åœ°æ¨™è§€æ™¯å°', transportType: 'car', location: 'The Neck Lookout' },
                            { id: 54, time: '10:30', title: 'Bruny Island Cheese Co.', category: 'food', desc: 'é£ŸèŠå£«', transportType: 'car', location: 'Bruny Island Cheese Company' },
                            { id: 55, time: '11:30', title: 'Get Shucked (ç”Ÿè ”)', category: 'food', desc: 'å¿…é£Ÿæ–°é®®ç”Ÿè ”', transportType: 'car', location: 'Get Shucked' },
                            { id: 56, time: '13:00', title: 'Cape Bruny Lighthouse', category: 'sightseeing', desc: 'æœ€å—ç«¯ç‡ˆå¡”', transportType: 'car', location: 'Cape Bruny Lighthouse' },
                            { id: 57, time: '15:00', title: 'Adventure Bay', category: 'sightseeing', desc: 'å°‹æ‰¾ç™½è¢‹é¼ ', transportType: 'car', location: 'Adventure Bay' },
                            { id: 58, time: '16:30', title: 'å›ç¨‹ Hobart', category: 'transport', desc: 'æ­æ¸¡è¼ªå› Kettering', transportType: 'ship' },
                            { id: 59, time: '18:30', title: 'æ™šé¤: Aloft / Bar Wa', category: 'food', desc: 'Fine Dining æˆ– Izakaya', transportType: 'car' }
                        ],
                        // Day 6: 5/27 (Maria Island)
                         [
                            { id: 61, time: '07:00', title: 'Hobart â†’ Triabunna', category: 'transport', desc: 'è¡Œæé–è»Šå°¾ï¼Œè»Šæ³Šç¢¼é ­', transportType: 'car', travelTime: '1h 15m' },
                            { id: 62, time: '10:00', title: 'èˆ¹å…¥ Maria Island', category: 'transport', desc: 'èˆ¹ç¨‹ 30 åˆ†é˜', transportType: 'ship', location: 'Triabunna Wharf' },
                            { id: 63, time: '10:30', title: 'Maria Island æ¢ç´¢', category: 'sightseeing', desc: 'Darlington (ç‡è¢‹ç†Š)ã€Painted Cliffs\nåˆé¤è‡ªå‚™ä¸‰æ–‡æ²»', transportType: 'walk', location: 'Maria Island' },
                            { id: 64, time: '14:30', title: 'å› Triabunna', category: 'transport', desc: 'æ­èˆ¹é›¢é–‹', transportType: 'ship' },
                            { id: 65, time: '15:15', title: 'å‰å¾€ Bicheno', category: 'transport', desc: 'ç§»å‹•è‡³æ±æµ·å²¸', transportType: 'car', travelTime: '1h 40m' },
                            { id: 66, time: '17:30', title: 'Check-in & æ™šé¤', category: 'food', desc: 'Lobster Shack', transportType: 'car', location: 'Lobster Shack Tasmania' },
                            { id: 67, time: '18:30', title: 'Bicheno Penguin Tour', category: 'sightseeing', desc: 'å¤œè§€é‡ç”Ÿä¼éµæ­¸å·¢', info: 'éœ€é è¨‚', transportType: 'walk', location: 'Bicheno Penguin Tours' }
                        ],
                        // Day 7: 5/28 (Freycinet)
                        [
                            { id: 71, time: '08:30', title: 'Bicheno â†’ Coles Bay', category: 'transport', desc: 'å‰å¾€åœ‹å®¶å…¬åœ’', transportType: 'car', travelTime: '35 min' },
                            { id: 72, time: '09:15', title: 'Wineglass Bay Lookout', category: 'sightseeing', desc: 'ä¾†å› 1.5å°æ™‚ï¼Œä¸­ç­‰é›£åº¦', transportType: 'walk', location: 'Wineglass Bay Lookout' },
                            { id: 73, time: '11:30', title: 'Cape Tourville Lighthouse', category: 'sightseeing', desc: 'è¼•é¬†æ­¥é“ï¼Œæµ·æ™¯ä¸€æµ', transportType: 'walk', location: 'Cape Tourville Lighthouse' },
                            { id: 74, time: '13:00', title: 'åˆé¤: Freycinet Marine Farm', category: 'food', desc: 'é£Ÿé’å£/ç”Ÿè ”', transportType: 'car', location: 'Freycinet Marine Farm' },
                            { id: 75, time: '14:30', title: 'å‰å¾€ Sheffield', category: 'transport', desc: 'é•·é€”è»Šç¨‹ (3.5 hr)\nç¶“ Campbell Town ä¼‘æ¯', info: 'å°å¿ƒè¢‹é¼ ', transportType: 'car', location: 'Sheffield' },
                            { id: 76, time: '18:00', title: 'æŠµé” Sheffield', category: 'hotel', desc: 'å£ç•«å°é®ä½å®¿', transportType: 'car', location: 'Sheffield' }
                        ],
                        // Day 8: 5/29 (Cradle Mt)
                        [
                            { id: 81, time: '07:30', title: 'å‰å¾€ Cradle Mt Visitor Centre', category: 'transport', desc: 'æ—©èµ·å‡ºç™¼', transportType: 'car', travelTime: '50 min' },
                            { id: 82, time: '08:30', title: 'è½‰ Shuttle Bus å…¥åœ’', category: 'transport', desc: 'ç§å®¶è»Šä¸èƒ½å…¥', transportType: 'bus', location: 'Cradle Mountain Visitor Centre' },
                            { id: 83, time: '09:00', title: 'Dove Lake & Enchanted Walk', category: 'sightseeing', desc: 'ç’°æ¹–æ­¥é“çŸ­ç·š / Boat Shed', transportType: 'walk', location: 'Dove Lake' },
                            { id: 84, time: '11:45', title: 'åˆé¤: Peppers Lodge', category: 'food', desc: 'Cradle Mountain Lodge', transportType: 'car' },
                            { id: 85, time: '12:30', title: 'å‰å¾€ Stanley', category: 'transport', desc: 'ç§»å‹•è‡³è¥¿åŒ—æµ·å²¸', transportType: 'car', travelTime: '2h 15m' },
                            { id: 86, time: '15:00', title: 'The Nut (Stanley)', category: 'sightseeing', desc: 'æµ·ä¸Šå·¨å²©\n5æœˆ Chairlift åœé‹ï¼Œéœ€æ­¥è¡Œ', transportType: 'walk', location: 'The Nut State Reserve' },
                            { id: 87, time: '17:00', title: 'æ™šé¤: Hursey Seafoods', category: 'food', desc: 'é£Ÿç‚¸é¾è¦', transportType: 'car', location: 'Hursey Seafoods' },
                            { id: 88, time: '18:30', title: 'å‰å¾€ Launceston', category: 'transport', desc: 'è¡Œ Bass Hwy è¼ƒæ˜“è¡Œ', transportType: 'car', travelTime: '2h' },
                            { id: 89, time: '20:30', title: 'Check-in Launceston', category: 'hotel', desc: 'CBD ä½å®¿', transportType: 'car', location: 'Launceston' }
                        ],
                        // Day 9: 5/30 (To Sydney)
                        [
                            { id: 91, time: '08:00', title: 'æ—©é¤: Sweetbrew', category: 'food', desc: 'æˆ– Bread & Butter', transportType: 'walk' },
                            { id: 92, time: '08:30', title: 'å‰å¾€æ©Ÿå ´é‚„è»Š', category: 'transport', desc: 'Launceston Airport (LST)', transportType: 'car', location: 'Launceston Airport' },
                            { id: 93, time: '09:45', title: 'ğŸ›« LST â†’ SYD (QF5746)', category: 'flight', desc: 'å‰å¾€æ‚‰å°¼', transportType: 'flight' },
                            { id: 94, time: '12:30', title: 'å‡ºå¸‚å€ Check-in', category: 'transport', desc: 'æ­ç«è»Š/Uber', transportType: 'train', location: 'Sydney CBD' },
                            { id: 95, time: '13:30', title: 'åˆé¤: Fish Market', category: 'food', desc: 'æˆ– The Grounds', transportType: 'walk', location: 'Sydney Fish Market' },
                            { id: 96, time: '15:00', title: 'æ‚‰å°¼å¸‚å€æ¼«éŠ', category: 'sightseeing', desc: 'Opera House / Harbour Bridge / QVB', transportType: 'walk', location: 'Sydney Opera House' },
                            { id: 97, time: '19:00', title: 'æ™šé¤: Mr. Wong', category: 'food', desc: 'æˆ– Hurricaneâ€™s Grill', transportType: 'walk', location: 'Mr. Wong' }
                        ],
                        // Day 10: 5/31 (Home)
                        [
                            { id: 101, time: '08:00', title: 'å‰å¾€æ‚‰å°¼æ©Ÿå ´ (T1)', category: 'transport', desc: 'åœ‹éš›ç·šå‡ºç™¼', transportType: 'car', location: 'Sydney International Airport' },
                            { id: 102, time: '10:10', title: 'ğŸ›« SYD â†’ HKG (QF127)', category: 'flight', desc: 'å›å®¶', transportType: 'flight' },
                            { id: 103, time: '17:55', title: 'æŠµé”é¦™æ¸¯', category: 'flight', desc: 'Sweet Home!', transportType: 'flight' }
                        ]
                    ],

                    shoppingList: [],
                    expenses: [],

                    newItem: { title: '', time: '12:00', category: 'sightseeing', desc: '', location: '', transportType: 'car', travelTime: '', info: '' },
                    newShopping: { name: '', image: null },
                    newExpense: { name: '', amount: '', category: 'food', date: '', payment: 'ç¾é‡‘' }
                }
            },
            computed: {
                currentDayItinerary() { return this.itineraryData[this.selectedDayIndex] || []; },
                totalExpenses() { return this.expenses.reduce((sum, item) => sum + parseInt(item.amount || 0), 0); }
            },
            watch: {
                selectedDayIndex() { this.fetchWeather(); }
            },
            mounted() {
                this.fetchWeather();
                const savedShopping = localStorage.getItem('shoppingList_tas');
                if (savedShopping) this.shoppingList = JSON.parse(savedShopping);
                const savedExpenses = localStorage.getItem('expenses_tas');
                if (savedExpenses) this.expenses = JSON.parse(savedExpenses);
            },
            methods: {
                fetchWeather() {
                    let cityQuery = 'Hobart,AU';
                    let cityName = 'Hobart';
                    if (this.selectedDayIndex >= 6 && this.selectedDayIndex <= 8) { cityQuery = 'Launceston,AU'; cityName = 'Launceston'; }
                    if (this.selectedDayIndex >= 9) { cityQuery = 'Sydney,AU'; cityName = 'Sydney'; }

                    this.weather.city_name = cityName;
                    fetch(`https://api.openweathermap.org/data/2.5/weather?q=${cityQuery}&units=metric&lang=zh_tw&appid=${this.apiKey}`)
                    .then(res => res.json())
                    .then(data => {
                        this.weather.temp = Math.round(data.main.temp);
                        this.weather.feels_like = Math.round(data.main.feels_like);
                        const id = data.weather[0].id;
                        if (id === 800) this.weather.icon = 'fa-sun';
                        else if (id >= 801) this.weather.icon = 'fa-cloud';
                        else if (id >= 500) this.weather.icon = 'fa-cloud-rain';
                        else this.weather.icon = 'fa-cloud-sun';
                    })
                    .catch(() => { this.weather.temp = 12; this.weather.icon = 'fa-cloud'; });
                },
                convert(type) {
                    if (type === 'aud') this.calcHkd = (this.calcAud * this.exchangeRate).toFixed(1);
                    else this.calcAud = (this.calcHkd / this.exchangeRate).toFixed(2);
                },
                openMap(loc) { if(loc) window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(loc)}`, '_blank'); },
                openImage(src) { this.currentImageSrc = src; this.showImageModal = true; },
                tabClass(tab) { return this.currentTab === tab ? 'bg-tas-600 text-white w-12 h-12 rounded-full shadow-lg flex items-center justify-center transform scale-110' : 'bg-white/90 text-tas-600 w-10 h-10 rounded-full shadow flex items-center justify-center'; },
                getCategoryIcon(cat) { const map = { food: 'fa-utensils', transport: 'fa-car', shopping: 'fa-bag-shopping', ticket: 'fa-ticket', hotel: 'fa-bed' }; return `fa-solid ${map[cat] || 'fa-circle'}`; },
                getTransportIcon(type) { const map = { walk: 'fa-person-walking', train: 'fa-train', car: 'fa-car', bus: 'fa-bus', flight: 'fa-plane', ship: 'fa-ship' }; return `fa-solid ${map[type] || 'fa-arrow-right'}`; },
                itemCategoryName(cat) { const map = { sightseeing: 'æ™¯é»', food: 'ç¾é£Ÿ', shopping: 'è³¼ç‰©', transport: 'äº¤é€š', hotel: 'ä½å®¿', flight: 'èˆªç­' }; return map[cat] || 'å…¶ä»–'; },
                openAddModal() { this.showModal = true; },
                handleImageUpload(e) { const f = e.target.files[0]; if(f) { const r = new FileReader(); r.onload = (e) => this.newShopping.image = e.target.result; r.readAsDataURL(f); } },
                confirmAdd() { 
                    if (this.currentTab === 'itinerary' && this.newItem.title) {
                        this.itineraryData[this.selectedDayIndex].push({...this.newItem, id: Date.now()});
                        this.itineraryData[this.selectedDayIndex].sort((a,b) => a.time.localeCompare(b.time));
                    } else if (this.currentTab === 'shopping' && this.newShopping.name) {
                        this.shoppingList.push({...this.newShopping, id: Date.now()});
                        localStorage.setItem('shoppingList_tas', JSON.stringify(this.shoppingList));
                    } else if (this.currentTab === 'expenses' && this.newExpense.amount) {
                        this.expenses.push({...this.newExpense, id: Date.now()});
                        localStorage.setItem('expenses_tas', JSON.stringify(this.expenses));
                    }
                    this.showModal = false; 
                },
                deleteItem(id) { if(confirm('åˆªé™¤?')) this.itineraryData[this.selectedDayIndex] = this.itineraryData[this.selectedDayIndex].filter(i => i.id !== id); },
                removeShoppingItem(id) { this.shoppingList = this.shoppingList.filter(i => i.id !== id); localStorage.setItem('shoppingList_tas', JSON.stringify(this.shoppingList)); },
                deleteExpense(id) { if(confirm('åˆªé™¤?')) { this.expenses = this.expenses.filter(i => i.id !== id); localStorage.setItem('expenses_tas', JSON.stringify(this.expenses)); } },
                moveItem(idx, dir) { 
                    const list = this.itineraryData[this.selectedDayIndex];
                    const target = idx + dir;
                    if(target >= 0 && target < list.length) [list[idx], list[target]] = [list[target], list[idx]];
                }
            }
        }).mount('#app');
    </script>
</body>
</html>
